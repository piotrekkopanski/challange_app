class ApplicationController < ActionController::Base
  # Prevent CSRF attacks by raising an exception.
  # For APIs, you may want to use :null_session instead.
  protect_from_forgery with: :exception
 before_filter :show
 before_filter :configure_permitted_parameters, if: :devise_controller?

   def show
   @user.points = 100
   @user.save
   @question = Question.find_by_id(params[:id])
      @user.questions.each do |question|
       @user.points = @user.points - 10
       @user.save
     end
     @user.answers.each do |answer|
      @user.points = @user.points + 5*answer.get_upvotes.count
      @user.save
     if  answer.accept == true
      @user.points = @user.points + 25
      @user.save
     else
     end
    end
   end

    protected

        def configure_permitted_parameters
            devise_parameter_sanitizer.for(:sign_up) { |u| u.permit(:name, :email, :password,:avatar,:points) }
            devise_parameter_sanitizer.for(:account_update) { |u| u.permit(:name, :email, :password, :current_password,:avatar,:points) }
        end
 
end
